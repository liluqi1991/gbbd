<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>è¯—æ„æ»‘åŠ¨</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden; /* åˆå§‹éšè—æ»šåŠ¨æ¡ */
            font-family: Arial, sans-serif;
            background-color: #f0f0f0; /* å¯é€‰èƒŒæ™¯è‰² */
        }

        #loading-screen {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            font-size: 24px;
            color: #666;
        }

        #password-screen {
            display: none; /* é»˜è®¤éšè— */
            height: 100%;
            overflow-y: auto; /* å…è®¸å‚ç›´æ»šåŠ¨ */
            padding: 20px;
            box-sizing: border-box;
        }

        .input-container {
            margin-top: 50vh; /* å°†è¾“å…¥æ¡†æ”¾åœ¨å±å¹•ä¸‹æ–¹é™„è¿‘ */
            text-align: center;
        }

        #password {
            padding: 10px;
            font-size: 18px;
            width: 200px;
        }

        .poem-container {
            /* ç”¨äºå®šä½è¯—å¥ */
        }

        .poem-line {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            text-align: center;
            font-size: 24px;
            padding: 10px;
            box-sizing: border-box;
            /* å¹³æ»‘è¿‡æ¸¡ï¼Œè™½ç„¶æˆ‘ä»¬ç”¨ JS æ§åˆ¶ï¼Œä½† CSS è¿‡æ¸¡æœ‰æ—¶ä¹Ÿæœ‰å¸®åŠ© */
            transition: transform 0.1s linear;
            pointer-events: none; /* é˜²æ­¢è¯—å¥é˜»æŒ¡ç”¨æˆ·æ»šåŠ¨ */
        }
    </style>
</head>
<body>

<div id="loading-screen">æ­£åœ¨åŠ è½½éŸ³ä¹...</div>

<div id="password-screen">
    <!-- å¯†ç è¾“å…¥åŒºåŸŸ -->
    <div class="input-container">
        <label for="password">è¯·è¾“å…¥å¯†ç :</label><br><br>
        <input type="password" id="password" placeholder="...">
    </div>

    <!-- è¯—å¥å®¹å™¨ -->
    <div class="poem-container">
        <!-- ç¬¬ä¸€è¡Œè¯—å¥ -->
        <div id="poem-line-1" class="poem-line">è¿™æ˜¯ç¬¬ä¸€è¡Œè¯—å¥</div>
        <!-- å¯ä»¥æ·»åŠ æ›´å¤šè¡Œ -->
        <!-- <div id="poem-line-2" class="poem-line">è¿™æ˜¯ç¬¬äºŒè¡Œè¯—å¥</div> -->
    </div>
</div>

<script>
    (function() {
        // --- é…ç½®åŒº ---
        const mp3Path = 'path/to/your/music.mp3'; // <<<--- è¯·æ›¿æ¢ä¸ºä½ çš„å®é™…MP3è·¯å¾„
        const poemText = "è¿™æ˜¯ç¬¬ä¸€è¡Œè¯—å¥"; // <<<--- è¯—å¥å†…å®¹

        // --- è·å–DOMå…ƒç´  ---
        const loadingScreen = document.getElementById('loading-screen');
        const passwordScreen = document.getElementById('password-screen');
        const poemLineElement = document.getElementById('poem-line-1');
        const passwordInput = document.getElementById('password');

        // è®¾ç½®è¯—å¥æ–‡æœ¬
        if (poemLineElement) {
            poemLineElement.textContent = poemText;
        }

        // --- MP3 åŠ è½½é€»è¾‘ ---
        let isAudioLoaded = false;
        const audio = new Audio();
        audio.preload = 'auto';
        audio.src = mp3Path;

        // ç›‘å¬åŠ è½½æˆåŠŸ
        audio.addEventListener('canplaythrough', function() {
            console.log("âœ… MP3 åŠ è½½å®Œæˆ");
            isAudioLoaded = true;
            showPasswordScreen();
        });

        // ç›‘å¬åŠ è½½é”™è¯¯ (å¯é€‰)
        audio.addEventListener('error', function(e) {
            console.error("âŒ MP3 åŠ è½½å¤±è´¥:", e);
            alert("éŸ³ä¹åŠ è½½å¤±è´¥ï¼Œä½†å°†ç»§ç»­æ˜¾ç¤ºç•Œé¢ã€‚");
            // å³ä½¿å¤±è´¥ä¹Ÿæ˜¾ç¤ºç•Œé¢
            showPasswordScreen();
        });

        // æ˜¾ç¤ºå¯†ç ç•Œé¢çš„å‡½æ•°
        function showPasswordScreen() {
            loadingScreen.style.display = 'none';
            passwordScreen.style.display = 'block';
            document.body.style.overflow = 'auto'; // å¯ç”¨æ»šåŠ¨
            // å¼€å§‹è¯—å¥åŠ¨ç”»
            setTimeout(startPoemSlideAnimation, 100); // ç¨å¾®å»¶è¿Ÿç¡®ä¿ç•Œé¢æ¸²æŸ“å®Œæˆ
        }


        // --- è¯—å¥æ»‘åŠ¨é€»è¾‘ ---
        let animationId = null; // ç”¨äºå­˜å‚¨ requestAnimationFrame ID
        let startY = window.innerHeight; // èµ·å§‹ä½ç½®ï¼šå±å¹•åº•éƒ¨ä¹‹å¤–
        let targetY = 0; // ç»“æŸä½ç½®ï¼šå±å¹•é¡¶éƒ¨
        let currentY = startY;
        const duration = 8000; // åŠ¨ç”»æŒç»­æ—¶é—´ (æ¯«ç§’)
        let startTime = null;

        function startPoemSlideAnimation() {
            if (!poemLineElement) return;

            // åˆå§‹åŒ–è¯—å¥ä½ç½®
            poemLineElement.style.transform = `translateY(${startY}px)`;

            // å®šä¹‰åŠ¨ç”»å¸§å‡½æ•°
            function animate(currentTime) {
                if (!startTime) startTime = currentTime;
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);

                // ä½¿ç”¨ ease-out ç¼“åŠ¨å‡½æ•°
                const easedProgress = 1 - Math.pow(1 - progress, 3);

                currentY = startY + (targetY - startY) * easedProgress;
                poemLineElement.style.transform = `translateY(${currentY}px)`;

                // å¦‚æœåŠ¨ç”»æœªå®Œæˆï¼Œç»§ç»­ä¸‹ä¸€å¸§
                if (progress < 1) {
                    animationId = requestAnimationFrame(animate);
                } else {
                    // åŠ¨ç”»ç»“æŸï¼Œå›ºå®šåœ¨é¡¶éƒ¨
                    poemLineElement.style.transform = `translateY(${targetY}px)`;
                    console.log("ğŸ“œ è¯—å¥æ»‘åŠ¨åŠ¨ç”»ç»“æŸ");
                }
            }

            // å¯åŠ¨åŠ¨ç”»
            animationId = requestAnimationFrame(animate);

            // æ·»åŠ ç”¨æˆ·äº¤äº’ç›‘å¬å™¨æ¥åœæ­¢åŠ¨ç”»
            const stopAnimation = () => {
                if (animationId) {
                    cancelAnimationFrame(animationId);
                    animationId = null;
                    console.log("âœ‹ ç”¨æˆ·æ“ä½œä¸­æ–­äº†è¯—å¥æ»‘åŠ¨");
                }
                // ç§»é™¤ç›‘å¬å™¨ï¼Œé˜²æ­¢é‡å¤è§¦å‘
                window.removeEventListener('wheel', stopAnimation);
                window.removeEventListener('touchstart', stopAnimation);
            };

            // ç›‘å¬æ»šè½®å’Œè§¦æ‘¸å¼€å§‹äº‹ä»¶
            window.addEventListener('wheel', stopAnimation, { once: true });
            window.addEventListener('touchstart', stopAnimation, { once: true });
        }

        // --- é¡µé¢åŠ è½½å®Œæˆåå¼€å§‹åŠ è½½éŸ³é¢‘ ---
        window.addEventListener('load', function() {
            // éŸ³é¢‘åŠ è½½å·²åœ¨ä¸Šé¢å®šä¹‰å¹¶ç»‘å®šäº‹ä»¶ç›‘å¬å™¨
            // è¿™é‡Œä¸éœ€è¦é¢å¤–æ“ä½œï¼Œè®¾ç½® src åæµè§ˆå™¨ä¼šè‡ªåŠ¨å¼€å§‹åŠ è½½
             console.log("ğŸš€ é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹åŠ è½½éŸ³é¢‘...");
        });

    })();
</script>

</body>
</html>
